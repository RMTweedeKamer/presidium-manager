<!DOCTYPE HTML>
<html lang="nl_NL" xmlns:th="http://www.thymeleaf.org">
    <head th:replace="fragments.html :: head ('Planner')">

    </head>
    <body>
        <div class="info" th:if="${param.edited}">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            Kamerstuk is aangepast.
        </div>
        <div class="info" th:if="${param.unplanned}">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            Kamerstuk uit de wachtrij gehaald.
        </div>
        <div class="info" th:if="${param.withdrawn}">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            Kamerstuk is ingetrokken.
        </div>
        <div class="info" th:if="${param.rescheduled}">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            Kamerstuk is verzet.
        </div>
        <div class="alert" th:if="${param.notfound}">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            Kamerstuk is niet gevonden.
        </div>
        <div class="alert" th:if="${param.invalidUsername}">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            De gebruikersnaam van de indiener was incorrect, deze is dus niet op de hoogte gesteld. De rest van de operatie is wel succesvol uitgevoerd.
        </div>
        <div class="alert" th:if="${param.duplicateCallsign}">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            De identificator van het kamerstuk is al in gebruik, voer een andere identificator in.
        </div>
        <div class="alert" th:if="${param.invalidCallsign}">
            <span class="closebtn" onclick="this.parentElement.style.display='none';">&times;</span>
            De identificator van het kamerstuk is niet correct. Zorg dat je een juiste letter combinatie met 4 cijfers hebt gebruikt.
        </div>

        <main class="new-container">
            <aside id="sidebar-location"></aside>

            <section class="new-content">
                <nav th:replace="fragments.html :: menu (true)"></nav>

                <h1 class="middle">Ingeplande stukken</h1>

                <div class="new-list-item" th:each="item : ${items}" th:classappend="${item.isUrgent()}? urgent">
                    <p th:text="${item.title}" class="title"></p>
                    <p>|</p>
                    <p th:text="'' + ${item.submittedBy}"></p>
                    <p>|</p>
                    <p th:text="${item.getPostDateAsString()}"></p>
                    <div class="actions">
                        <a th:href="'#edit-' + ${itemStat.count}" rel="modal:open"><button>Aanpassen</button></a>
                        <a th:href="'#reschedule-' + ${itemStat.count}" rel="modal:open"><button>Verplaatsen</button></a>
                        <a th:href="'#dequeue-' + ${itemStat.count}" rel="modal:open"><button>Terugtrekken</button></a>
                    </div>


                    <div th:id="'edit-' + ${itemStat.count}" class="modal">
                        <h2>Aanpassen</h2>
                        <p>Hier kunnen een aantal dingen aan het kamerstuk worden aangepast, zoals correcte formatting voor Reddit.</p>
                        <form th:object="${item}" th:action="@{/scheduler/edit}" th:method="post">
                            <input type="hidden" th:name="id" th:value="*{id}">
                            <label>
                                <p>Kamerstuknummer:</p>
                                <input class="submitpanel small" type="text" th:name="callsign" th:value="*{callsign}" th:placeholder="${item.type.getCall()} + '0000'" readonly>
                            </label>
                            <label>
                                <p>Titel:</p>
                                <input class="submitpanel big"  type="text" th:name="title" th:value="*{title}">
                            </label>
                            <label>
                                <p>Bundeltitel:</p>
                                <input class="submitpanel big"  type="text" th:name="bundleTitle" th:value="*{bundleTitle}" placeholder="Alleen van toepassing op de eerste motie in een bundel.">
                            </label>
                            <label>
                                <p>Inhoud:</p>
                                <textarea class="submitpanel" th:name="content" th:text="*{content}"></textarea>
                            </label>
                            <label>
                                <p>Indiener:</p>
                                <input class="medium" type="text" th:name="submittedBy" th:value="*{submittedBy}" readonly>
                            </label>
                            <label>
                                <p>Oproepen:</p>
                                <input class="submitpanel big" type="text" th:name="toCallString" th:value="*{toCallString}">
                            </label>
                            <input type="submit" th:value="Aanpassen">
                        </form>
                    </div>
                    <div th:id="'reschedule-' + ${itemStat.count}" class="modal">
                        <h2>Verplaatsen</h2>
                        <form th:object="${item}" th:action="@{scheduler/reschedule}" th:method="post">
                            <input type="hidden" th:name="id" th:value="*{id}">
                            <div class='input-group date' id='datetimepicker2'>
                                <label>
                                    <p>Postdatum:</p>
                                    <input class="submitpanel medium datetime" type='text' th:name="postDate" th:placeholder="*{postDate}" required autocomplete="off"/>
                                </label>
                            </div>
                            <div th:if="${item.type.needsVote()}" class='input-group datetime' id='datetimepicker3'>
                                <label>
                                    <p>Stemdatum:</p>
                                    <input class="submitpanel medium datetime" type='text' th:name="voteDate" th:placeholder="*{voteDate}" required autocomplete="off"/>
                                </label>
                            </div>
                            <input type="submit" th:value="'Verplaatsen'">
                        </form>
                    </div>
                    <div th:id="'dequeue-' + ${itemStat.count}" class="modal">
                        <h2>Terugtrekken</h2>
                        <form th:object="${item}" th:action="@{/scheduler/unplan}" th:method="post">
                            <input type="hidden" th:name="id" th:value="*{id}">

                            <p>Haal een kamerstuk uit de wachtrij. Onderstaande reden wordt via Reddit doorgegeven aan de indiener.</p>

                            <label>
                                <p>Reden:</p>
                                <input class="submitpanel big" type="text" th:name="reason" th:value="*{reason}" required>
                            </label>
                            <input type="submit" th:value="'Terugtrekken'">
                        </form>
                    </div>
                </div>
            </section>
        </main>

        <script>
            $("#sidebar-location").load("/scheduler/sidebar?page=Ingepland")
        </script>
        <script>
            $(".datetime").datetimepicker({
                format: "d-m-Y H:i"
            })
        </script>
    </body>
</html>